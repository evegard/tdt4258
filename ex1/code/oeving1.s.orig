/******************************************************************************
 *	
 * Øving 1 UCSysDes
 *	
 *****************************************************************************/

.include "io.s"  /* inkludere noen nyttige symboler (konstanter) */

/* Eksempel på hvordan sette symboler (se også io.s) */
SR_GM =   16  /* statusregisterflag "GM" er bit 16 */
	
/*****************************************************************************/
/* text-segment */
/* all programkoden må plasseres i dette segmentet */
	
.text
	
.globl  _start
_start: /* programutføring vil starte her */

        /* eksempel på skriving til minneområdet "eksempelvariabel" */
	lddpc r0, eksempelvariabel_peker  /* last peker til r0 */
        mov r1, 0xad /* last verdien 0xad i r1 */
        st.w r0, r1  /* skriv 0xad til minnet */

        /* eksempel på lesing fra minneområdet "eksempelvariabel" */
	lddpc r0, eksempelvariabel_peker  /* last peker til r0 */
	ld.w r1, r0  /* last fra minnet til r1 */

loop:   /* evig løkke */
        rjmp loop

/* peker til eksempelvariabel, brukes av lddpc-instruksjonen */
eksempelvariabel_peker: 
        .int eksempelvariabel

/*****************************************************************************/
/* data-segment */
/* alle dataområder som skal kunne skrives til må plasseres her */
	
.data
	
eksempelvariabel:       /* eksempel på variabel med startverdien 5 */
        .int 5     
